@model Company

<div class="container mx-auto px-4 py-8 max-w-6xl">
    <div class="bg-white shadow-lg rounded-lg p-8 border-t-4 border-indigo-600">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">@((Model.Id != 0) ? "Update Company" : "Add New Company")</h1>
        <p class="text-center text-gray-500 mb-8">Enter company information below</p>

        <!-- Form Start -->
        <form method="post" class="w-full" x-data="formHandler()">
            <input asp-for="@(Model.Id)" hidden />

            <div class="flex flex-wrap -mx-3 mb-6">
                <!-- Company Name -->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <div class="relative">
                        <label for="Name" class="block text-gray-700 text-sm font-bold mb-2">Company Name</label>
                        <div class="flex">
                            <div class="flex items-center bg-gray-100 rounded-l px-3">
                                <i class="fas fa-building text-gray-500"></i>
                            </div>
                            <input type="text" asp-for="Name" id="Name" name="Name"
                                   class="appearance-none block w-full bg-white text-gray-700 border border-gray-300 rounded-r py-3 px-4 leading-tight focus:outline-none focus:border-indigo-500"
                                   required placeholder="Enter company name" />
                        </div>
                        <span asp-validation-for="Name" class="text-red-500 text-xs italic mt-1 block"></span>
                    </div>
                </div>

                <!-- Street Address -->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <div class="relative">
                        <label for="StreetAddress" class="block text-gray-700 text-sm font-bold mb-2">Street Address</label>
                        <div class="flex">
                            <div class="flex items-center bg-gray-100 rounded-l px-3">
                                <i class="fas fa-map-marker-alt text-gray-500"></i>
                            </div>
                            <input type="text" asp-for="StreetAddress" id="StreetAddress" name="StreetAddress"
                                   class="appearance-none block w-full bg-white text-gray-700 border border-gray-300 rounded-r py-3 px-4 leading-tight focus:outline-none focus:border-indigo-500"
                                   required placeholder="Enter street address" />
                        </div>
                    </div>
                </div>

                <!-- City -->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <div class="relative">
                        <label for="City" class="block text-gray-700 text-sm font-bold mb-2">City</label>
                        <div class="flex">
                            <div class="flex items-center bg-gray-100 rounded-l px-3">
                                <i class="fas fa-city text-gray-500"></i>
                            </div>
                            <input type="text" asp-for="City" id="City" name="City"
                                   class="appearance-none block w-full bg-white text-gray-700 border border-gray-300 rounded-r py-3 px-4 leading-tight focus:outline-none focus:border-indigo-500"
                                   required placeholder="Enter city name" />
                        </div>
                    </div>
                </div>

                <!-- State -->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <div class="relative">
                        <label for="State" class="block text-gray-700 text-sm font-bold mb-2">State</label>
                        <div class="flex">
                            <div class="flex items-center bg-gray-100 rounded-l px-3">
                                <i class="fas fa-map text-gray-500"></i>
                            </div>
                            <input type="text" asp-for="State" id="State" name="State"
                                   class="appearance-none block w-full bg-white text-gray-700 border border-gray-300 rounded-r py-3 px-4 leading-tight focus:outline-none focus:border-indigo-500"
                                   required placeholder="Enter state name" />
                        </div>
                    </div>
                </div>

                <!-- Postal Code -->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <div class="relative">
                        <label for="PostalCode" class="block text-gray-700 text-sm font-bold mb-2">Postal Code</label>
                        <div class="flex">
                            <div class="flex items-center bg-gray-100 rounded-l px-3">
                                <i class="fas fa-mail-bulk text-gray-500"></i>
                            </div>
                            <input type="text" asp-for="PostalCode" id="PostalCode" name="PostalCode"
                                   class="appearance-none block w-full bg-white text-gray-700 border border-gray-300 rounded-r py-3 px-4 leading-tight focus:outline-none focus:border-indigo-500"
                                   required placeholder="Enter postal code" />
                        </div>
                    </div>
                </div>

                <!-- Phone Number -->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <div class="relative">
                        <label for="PhoneNumber" class="block text-gray-700 text-sm font-bold mb-2">Phone Number</label>
                        <div class="flex">
                            <div class="flex items-center bg-gray-100 rounded-l px-3">
                                <i class="fas fa-phone text-gray-500"></i>
                            </div>
                            <input type="text" asp-for="PhoneNumber" id="PhoneNumber" name="PhoneNumber"
                                   class="appearance-none block w-full bg-white text-gray-700 border border-gray-300 rounded-r py-3 px-4 leading-tight focus:outline-none focus:border-indigo-500"
                                   required placeholder="Enter phone number" x-on:input="formatPhoneNumber" x-model="phoneNumber" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Button & Back Link -->
            <div class="flex flex-wrap items-center justify-between mt-8">
                <button type="submit"
                        class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transform transition-all duration-300 hover:-translate-y-1 flex items-center">
                    <i class="fas" :class="formTitle.includes('Update') ? 'fa-save' : 'fa-plus-circle'"></i>
                    <span class="ml-2">@((Model.Id != 0) ? "Update Company" : "Add Company")</span>
                </button>

                <a asp-action="Index"
                   class="bg-white hover:bg-gray-100 text-gray-700 font-semibold py-3 px-6 border border-gray-300 rounded-lg shadow hover:shadow-md transition-all duration-300 flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to List
                </a>
            </div>
        </form>
        <!-- Form End -->
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.12.3/cdn.min.js"></script>
<script>
    function formHandler() {
        return {
            formTitle: document.querySelector('h1').innerText,
            phoneNumber: '',

            formatPhoneNumber() {
                // Remove non-numeric characters
                let cleaned = this.phoneNumber.replace(/\D/g, '');

                // Format as (XXX) XXX-XXXX
                if (cleaned.length > 0) {
                    if (cleaned.length <= 3) {
                        this.phoneNumber = '(' + cleaned;
                    } else if (cleaned.length <= 6) {
                        this.phoneNumber = '(' + cleaned.substring(0, 3) + ') ' + cleaned.substring(3);
                    } else {
                        this.phoneNumber = '(' + cleaned.substring(0, 3) + ') ' +
                                          cleaned.substring(3, 6) + '-' +
                                          cleaned.substring(6, Math.min(10, cleaned.length));
                    }
                }
            }
        }
    }
</script>